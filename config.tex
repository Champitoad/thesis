\usepackage[notion]{knowledge}
\usepackage{multirow}
\usepackage{tabularx}
\usepackage{makecell}
\usepackage{stmaryrd}
\usepackage{mathpartir}
\usepackage{prftree}
\usepackage{cmll}
\usepackage{float}
\usepackage{framed}
\usepackage{tikz-cd}
\usepackage{pifont}
\usepackage{turnstile}
\usepackage[nointegrals]{wasysym}
\usepackage{bm}
\usepackage{hhline}
\usepackage{stackengine}
\usepackage{subfig}
\usepackage{environ}
\usepackage{epigraph}
\usepackage{newunicodechar}
\usepackage{minted}
\usepackage{fontspec}
\usepackage{unicode-math}
\usepackage{luacode}

%%% Font config

\setmathfont{Libertinus Math}
\setmathfont{latinmodern-math.otf}[range=\multimap]
\setmathfont{STIXTwoMath-Regular.otf}[range={\Coloneq,"29D0,"25CF,"2AD0}]
% \setmathfont{LibertinusMath-Regular.otf}[range=\vdash]
% \setmathfont{LibertinusMath-Regular.otf}[range=\nvdash]
% \setmathfont{LibertinusMath-Regular.otf}[range=\vDash]
% \setmathfont{LibertinusMath-Regular.otf}[range=\nvDash]
% \setmathfont{LibertinusMath-Regular.otf}[range=\Vdash]
% \setmathfont{LibertinusMath-Regular.otf}[range=\nVdash]

\DeclareMathAlphabet{\mathcall}{OMS}{cmsy}{m}{n}

\newfontfamily{\subseteqfont}{LibertinusMath-Regular.otf}

\newcommand{\csup}{\symbol{"2AD0}}
\newcommand{\trhd}{\symbol{"29D0}}
\newcommand{\blackcirc}{\symbol{"25CF}}

\newunicodechar{⊆}{{\subseteqfont\subseteq}}
\newunicodechar{⧐}{\trhd}
\newunicodechar{●}{\blackcirc}
\newunicodechar{⫐}{\csup}

% Calligraphic font with \mathcb
% \DeclareFontFamily{U}{BOONDOX-calo}{\skewchar\font=45 }
% \DeclareFontShape{U}{BOONDOX-calo}{m}{n}{
%   <-> s*[1.05] BOONDOX-r-calo}{}
% \DeclareFontShape{U}{BOONDOX-calo}{b}{n}{
%   <-> s*[1.05] BOONDOX-b-calo}{}
% \DeclareMathAlphabet{\mathcb}{U}{BOONDOX-calo}{m}{n}
% \SetMathAlphabet{\mathcb}{bold}{U}{BOONDOX-calo}{b}{n}
% \DeclareMathAlphabet{\mathbcalboondox}{U}{BOONDOX-calo}{b}{n}

%%% Package config

% Epigraphs for inspirational quotes
\setlength{\epigraphwidth}{0.65\textwidth}

% knowledge
\input{notions.tex}
\input{macros.tex}
\definecolor{Dark Ruby Red}{HTML}{7c1b1e}
\definecolor{Dark Blue Sapphire}{HTML}{004c5c}
\definecolor{Dark Gamboge}{HTML}{be7c00}
\IfKnowledgePaperModeTF{
    %
}{
    % If we are NOT in paper mode (i.e. in composition mode or electronic mode)
    \knowledgestyle{intro notion}{color={Dark Ruby Red}, emphasize}
    \knowledgestyle{notion}{color={Dark Blue Sapphire}}
    \hypersetup{
        colorlinks=true,
        breaklinks=true,
        linkcolor={Dark Blue Sapphire}, % Links to sections, pages, etc.
        citecolor={Dark Blue Sapphire}, % Links to bibliography
        filecolor={Dark Blue Sapphire}, % Links to local file
        urlcolor={Dark Blue Sapphire},
    }
    \IfKnowledgeElectronicModeTF{
        %
    }{
        % If we are in composition mode, highlight unknown stuff (in yellow) and display the anchor point.
        \knowledgeconfigure{anchor point color={Dark Ruby Red}, anchor point shape=corner}
        \knowledgestyle{intro unknown}{color={Dark Gamboge}, emphasize}
        \knowledgestyle{intro unknown cont}{color={Dark Gamboge}, emphasize}
        \knowledgestyle{kl unknown}{color={Dark Gamboge}}
        \knowledgestyle{kl unknown cont}{color={Dark Gamboge}}
    }
}

% TikZ
\usetikzlibrary{calc}
\usetikzlibrary{decorations.pathmorphing,decorations.pathreplacing,decorations.shapes}

% graphicx
\graphicspath{{images/}{./}} % Paths where images are looked for

% TikZiT
\usepackage{tikzit}
\input{drawings/bubbles.tikzstyles}
\input{drawings/eg.tikzstyles}
% \input{drawings/bubbles.tikzdefs}
% \input{drawings/eg.tikzdefs}
\newcommand{\tikzscale}[3]{
  \scalebox{#1}{
    \begingroup
      \tikzset{every picture/.style={scale=#2,baseline=(current bounding box.center)}}
      #3
    \endgroup}}
\renewcommand{\tikzfig}[3]{
  \tikzscale{#1}{#2}{\InputIfFileExists{./drawings/#3.tikz}{}{{\color{red}\colorbox{pink}{missingfile : #3}}}}}
\newcommand{\stkfig}[2]{\tikzfig{#1}{0.5}{#2}}

% mdframed
\mdfdefinestyle{emphparstyle}{
	nobreak=true,
	skipabove=1.5\topskip,
	skipbelow=0pt,
	rightmargin=0pt,
	leftmargin=0pt,
	innertopmargin=1.25em,
	innerbottommargin=1.25em,
	innerrightmargin=2em,
	innerleftmargin=2em,
	topline=true,
	bottomline=true,
	rightline=true,
	leftline=true,
	linewidth=0.5pt,
	%roundcorner=0pt,
	%font={},
	%frametitlefont={},
	frametitlerule=false,
	linecolor=black,
	%backgroundcolor=LightBlue,
	fontcolor=black,
	%frametitlebackgroundcolor=LightBlue,
}
\newmdenv[
	style=emphparstyle,
]{emphpar}

% algorithm2e
\SetKw{Break}{break}
\SetKw{Continue}{continue}
\newcommand{\labproc}[1]{\label{proc:#1}}
\newcommand{\refproc}[1]{\texttt{\ref{proc:#1}}}

% enumitem
\setlist[description]{leftmargin=0.9em}
\setlist[itemize]{itemsep=-0.5\parskip,align=left,leftmargin=*,labelsep=0.9em}
\setlist[enumerate]{itemsep=-0.5\parskip,align=left,leftmargin=*,labelsep=0.9em}
\setlist[2]{before=\setlength\parskip{0.5em}}

% tabularx
\newcolumntype{O}[1]{>{\setlength\hsize{#1\hsize}}c}
\newcolumntype{M}[1]{>{\small}m{#1\hsize}}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

% makecell
\renewcommand\theadfont{\bfseries\normalsize}

% xcolor
\definecolor{pos}{HTML}{C80000}
\definecolor{neg}{HTML}{0000C8}
\definecolor{hypo}{HTML}{007BFF}
\definecolor{conc}{HTML}{DC3545}
\definecolor{dvar}{HTML}{45A15A}
\definecolor{bubble}{HTML}{A0A0A0}
\definecolor{solved}{HTML}{DEFFCF}
\definecolor{genA}{HTML}{FFF8DD}
\definecolor{genB}{HTML}{FFEBFF}
\definecolor{hyp}{HTML}{FFEBFF}
\definecolor{hypnum}{HTML}{980098}
\definecolor{itsrc}{HTML}{0099ff}
\definecolor{itdst}{HTML}{b3e0ff}
\definecolor{ins}{HTML}{FFCCCC}
\definecolor{dcut}{HTML}{DADAD7}
\definecolor{dorange}{HTML}{FF6F00}
\definecolor{npcut}{HTML}{DFDFDE}
\definecolor{pbg}{HTML}{FFFFFF}
\definecolor{nbg}{HTML}{DFDFDE}
\definecolor{pfg}{HTML}{000000}
\definecolor{nfg}{HTML}{000000}
\definecolor{pistil}{HTML}{FFF344}

% prftree
\prflineextra=0em
\prflinepadbefore=0.5ex
\prflinepadafter=0.5ex
\prfrulenameskip=0.15em
\prflabelskip=0.35em
\prfdoublelineinterspace=0.001ex

\allowdisplaybreaks

% Custom LaTeX preamble for alectryon
% \usepackage{cmap} % fix search and cut-and-paste in Acrobat
% \usepackage{ifthen}
% \usepackage{alectryon}
% \usepackage{pygments}

%%% Notations

\input{notations}
