\input{_preamble.tex}

%----------------------------------------------------------------------------------------
%	BOOK INFORMATION
%----------------------------------------------------------------------------------------

\titlehead{}
\title{Deep Inference for Graphical Theorem Proving}
\author[PD]{Pablo Donato}
\date{November 8, 2023}
\publishers{}

%----------------------------------------------------------------------------------------

\frontmatter % Denotes the start of the pre-document content, uses roman numerals

%----------------------------------------------------------------------------------------
%	COPYRIGHT PAGE
%----------------------------------------------------------------------------------------

\makeatletter
\uppertitleback{\@titlehead} % Header

\lowertitleback{
	\textbf{Disclaimer} \\
	You can edit this page to suit your needs. For instance, here we have a no copyright statement, a colophon and some other information. This page is based on the corresponding page of Ken Arroyo Ohori's thesis, with minimal changes.
	
	\medskip
	
	\textbf{No copyright} \\
	\cczero\ This book is released into the public domain using the CC0 code. To the extent possible under law, I waive all copyright and related or neighbouring rights to this work.
	
	To view a copy of the CC0 code, visit: \\\url{http://creativecommons.org/publicdomain/zero/1.0/}
	
	\medskip
	
	\textbf{Colophon} \\
	This document was typeset with the help of \href{https://sourceforge.net/projects/koma-script/}{\KOMAScript} and \href{https://www.latex-project.org/}{\LaTeX} using the \href{https://github.com/fmarotta/kaobook/}{kaobook} class.
	
	\medskip
	
	\textbf{Publisher} \\
	First printed in May 2019 by \@publishers
}
\makeatother

%----------------------------------------------------------------------------------------
%	DEDICATION
%----------------------------------------------------------------------------------------

\dedication{
	The ultimate meaning of logic is this ability to manipulate.
	\flushright -- Jean-Yves Girard.
	\small
	TODO: Move this as the epigraph of some chapter (either Introduction or
	Proof-by-Action)
}


%----------------------------------------------------------------------------------------
%	OUTPUT TITLE PAGE AND PREVIOUS
%----------------------------------------------------------------------------------------

% Note that \maketitle outputs the pages before here
\maketitle

%----------------------------------------------------------------------------------------
%	ABSTRACT
%----------------------------------------------------------------------------------------

\chapter*{Abstract}

Proof assistants are software which allow for the precise checking of
mathematical reasoning. They can be general purpose (like Coq, Lean,
Isabelle...) or more specialized like EasyCrypt. They enable a level of accuracy
which certifies that no error can occur, have given birth to a wide range of
practical and theoretical works, and have been used in a wide range of
applications. But they remain difficult to use.

We propose a new paradigm of formal proof construction through actions performed
in a graphical user interface, in order to enable a more comfortable and
intuitive use. Our paradigm builds upon direct manipulation principles,
combining both old (Proof-by-Pointing) and new (Proof-by-Linking) interaction
techniques that exploit recent advances in deep inference proof theory. We
implement this paradigm in a prototype of graphical user interface called
Actema, using modern web-based technologies. We also design a generic protocol
for plugging Actema on any proof system that supports first-order intuitionistic
logic. This protocol is deployed inside the Coq proof assistant through the
coq-actema plugin, offering to users the ability to integrate graphical proofs
into existing textual developments.

% Then, driven by the will to integrate and improve the various interaction
% techniques of Actema in a unified formalism, we explore a series of deep
% inference proof calculi that give more structure to the notion of logical goal.
% These calculi share the ability to be represented in two alternative ways:
% either textually through a standard inductive syntax, or graphically through a
% metaphorical notation well-suited to direct manipulation. In particular, we
% propose to recast C.S. Peirce's theory of existential graphs as a system for
% interactive, goal-oriented proof building. We support this claim with another
% web-based prototype of graphical user interface, the Flower Prover, which has
% the property of working well on touch-based devices of varying screen sizes.

Then, driven by the will to improve the various interaction techniques of Actema
in a unified formalism, we explore a series of deep inference proof systems that
give more structure to the notion of logical goal. These systems share the
ability to represent goals in two alternative ways: either textually through a
standard inductive syntax, or graphically through a metaphorical notation
well-suited to direct manipulation.

The first family of systems, called bubble calculi, is an extension of the
theory of nested sequents, that we reframe as local rewriting systems with a
graphical and topological interpretation. Bubble calculi enable an efficient
sharing of contexts between subgoals, making them well-suited to the
factorization of both forward and backward reasoning steps in proofs. The second
system, called flower calculus, is an intuitionistic refinement of C.S. Peirce's
theory of existential graphs, understood as a system for interactive,
goal-directed proof building. It provides more iconic and economical means of
reasoning than bubble calculi, by exposing fewer inference rules that all work
directly on the goals themselves, removing the need for logical connectives.
% This should make the system easier to learn for users unfamiliar with symbolic
% logic, by bridging the gap between statements and their proofs.
Both types of systems are shown to be analytic and fully invertible, making them
amenable to proof automation techniques.

% The first family of systems, dubbed Bubble Calculi, is an extension of the
% theory of nested sequents, that we reframe as local rewriting systems with a
% graphical and topological interpretation. They enable a more efficient sharing
% of contexts between subgoals, represented as so-called bubbles. Combined with
% their perfect symmetry, this makes them well-suited to the factorization of both
% forward and backward reasoning steps in proofs. We also show how they are able
% to capture intuitionistic, dual-intuitionistic, bi-intuitionistic and classical
% logic as fragments of a single calculus, that correspond to various physical
% laws governing the porosity of bubbles.

% The second system, dubbed Flower Calculus, is an intuitionistic refinement of
% C.S. Peirce's theory of existential graphs, understood as a system for
% interactive, goal-oriented proof building. It provides more iconic and
% economical means of reasoning than Bubble Calculi, by requiring fewer inference
% rules that all work directly on the goals themselves, removing the need for
% logical connectives. To our knowledge, we provide the first proof of analyticity
% of existential graphs in the literature, through a normalization-by-evaluation
% argument with respect to Kripke models. Altogether, this should make the system
% amenable both to new proof automation techniques, and interaction with users
% unfamiliar with symbolic logic, bridging the gap between statements and their
% proofs.

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS & LIST OF FIGURES/TABLES
%----------------------------------------------------------------------------------------

\begingroup % Local scope for the following commands

% Define the style for the TOC, LOF, and LOT
%\setstretch{1} % Uncomment to modify line spacing in the ToC
%\hypersetup{linkcolor=blue} % Uncomment to set the colour of links in the ToC
\setlength{\textheight}{230\vscale} % Manually adjust the height of the ToC pages

% Turn on compatibility mode for the etoc package
\etocstandarddisplaystyle % "toc display" as if etoc was not loaded
\etocstandardlines % "toc lines as if etoc was not loaded

\setcounter{tocdepth}{1}
\tableofcontents % Output the table of contents

\listoffigures % Output the list of figures
\setcounter{tocdepth}{2}

% Comment both of the following lines to have the LOF and the LOT on different pages
\let\cleardoublepage\bigskip
\let\clearpage\bigskip

\listoftables % Output the list of tables

\endgroup

%----------------------------------------------------------------------------------------
%	MAIN BODY
%----------------------------------------------------------------------------------------

\mainmatter % Denotes the start of the main document content, resets page numbering and uses arabic numbers
\setchapterstyle{kao} % Choose the default chapter heading style

% \pagelayout{wide} % No margins
% \addpart{Preliminaries}
% \pagelayout{margin} % Restore margins

% \input{chapters/introduction.tex}

% \input{chapters/structural-proof-theory.tex}

\pagelayout{wide} % No margins
\addpart{Symbolic Manipulations}
\pagelayout{margin} % Restore margins

% \todo{Add some illustrations in the margin, e.g. screenshot of Coq proof view or proof script?}
% \todo{Or we move this in the introduction chapter.}

% Most Interactive Theorem Provers allow the user to incrementally construct
% formal proofs through an interaction loop. One progresses
% through a sequence of {\em states} corresponding to incomplete proofs. Each
% of these states is itself described by a finite set of {\em goals} and
% the proof is completed once there are no goals left.
% From the user's point of view, a goal appears as a sequent, in the
% sense coined by Gentzen. In the case of intuitionistic logic that is:
% \begin{itemize}
% 	\item One particular proposition $C$ which is {\em to be proved}; we
%   designate it as the goal's {\em conclusion},
% 	\item a set of propositions $\Gamma$ corresponding to {\em hypotheses}.
% \end{itemize}
% On paper, this sequent is written $\Gamma\seq C$.  The user performs
% {\em actions} on one such goal at a time, and the actions transform
% the goal, or rather replace the goal by a new set of goals. When this
% set is empty, the goal is said to be solved.

% The actions performed by the user can be more or less
% sophisticated. But, fundamentally, one finds elementary commands which
% correspond roughly to the logical rules, generally of natural
% deduction. For instance, a goal $\Gamma\seq A\vee B$
% (resp. $\Gamma\seq A\wedge B$) can be turned into either a goal
% $\Gamma\seq A$ or a goal $\Gamma\seq B$ (resp. into two goals
% $\Gamma\seq A$ and $\Gamma\seq B$).

% To sum up, during the proof construction process, a state is a set of
% sequents. These goals/sequents are modified by {\em commands}, which
% allow the user to navigate from the original statement of the theorem
% to the state where there are no goals left to be proved.

% In the dominant paradigm, these commands are provided by the user in
% text form; since Robin Milner and
% LCF~\cite{doi:10.1098/rsta.1984.0067}, they are called {\em
% tactics}. Proof files are literally {\em proof-scripts}; that is the
% sequence of tactics typed-in by the user.
% %% This means that the
% %% source files of most proof systems mix two languages:
% %% \begin{itemize}
% 	%% \item The language of mathematical statements, which is a
% 	%%   computer-adapted version of the regular formal language of
% 	%%   mathematics; for instance $\forall x\in{\mathbb N}. n + 1 > n$ becomes
% 	%%   \verb&forall n:nat. n+1 < n& in Coq.
% 	%% \item The actual proof scripts, which is a sequence of (combinations
% 	%%   of) proof tactics.
% 	%% \end{itemize}
	
% 	The work presented in this part is a form of continuation of the
% 	\emph{Proof-by-Pointing} (PbP) effort, initiated in the 1990's by Gilles Kahn,
% 	Yves Bertot, Laurent ThÃ©ry and their group \cite{PbP}. Both works share a main
% 	idea which is to replace the textual tactic commands by {\em gestural actions}
% 	performed by the user on a graphical user interface. In both cases, the {\em
% 	items} the user performs actions on are the current goal's conclusion and
% 	hypotheses. What is new in our work is that we allow not only to {\em click}
% 	on (subterms of) these items, but also to {\em move them} in order to
% 	drag-and-drop (DnD) one item onto another. This enriches the language of
% 	actions in, we argue, an intuitive way. We should point out that what is
% 	proposed here is not meant to replace but to complement the proof-by-pointing
% 	features. We thus envision a general {\em proof-by-action} paradigm, which
% 	includes both PbP and DnD features.

% While this first part of the thesis is confined to direct manipulation of
% \emph{formulas} inside a goal/sequent, we will explore in the second part of the
% thesis how to design pointing-based interactions for manipulating the
% \emph{goals themselves}. The idea of \emph{proof-by-action} then applies equally
% at both levels of formulas and goals, as a general principle of direct
% manipulation of the proof state.


% \input{chapters/pba.tex}
% \input{chapters/sfl.tex}
% \input{chapters/advanced.tex}
% \input{chapters/sfl-classical.tex}
% \input{chapters/plugin.tex}

\pagelayout{wide} % No margins
\addpart{Iconic Manipulations}
\pagelayout{margin} % Restore margins

% \input{chapters/bubbles.tex}
% \input{chapters/bubbles-symm.tex}
% \input{chapters/eg.tex}
\input{chapters/flowers.tex}
% \input{chapters/flowerprover.tex}

% \input{chapters/conclusion.tex}

\appendix % From here onwards, chapters are numbered with letters, as is the appendix convention

\pagelayout{wide} % No margins
\addpart{Appendix}
\pagelayout{margin} % Restore margins

% \input{appendix/pba.tex}
% \input{appendix/bubbles-symm.tex}
% \input{appendix/flowers.tex}

%----------------------------------------------------------------------------------------

\backmatter % Denotes the end of the main document content
\setchapterstyle{plain} % Output plain chapters from this point onwards

%----------------------------------------------------------------------------------------
%	BIBLIOGRAPHY
%----------------------------------------------------------------------------------------

% The bibliography needs to be compiled with biber using your LaTeX editor, or on the command line with 'biber main' from the template directory

\nocite{*}
\defbibnote{bibnote}{Here are the references in alphabetical order.\par\bigskip} % Prepend this text to the bibliography
\printbibliography[heading=bibintoc, title=Bibliography, prenote=bibnote] % Add

%----------------------------------------------------------------------------------------
%	INDEX
%----------------------------------------------------------------------------------------

% The index needs to be compiled on the command line with 'makeindex main' from the template directory

\printindex % Output the index

\input{_postamble.tex}